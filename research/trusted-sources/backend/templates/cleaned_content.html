<!DOCTYPE html>
<html>
<head>
    <title>Cleaned Content - {{ url_record.domain }}</title>
    <meta charset="UTF-8">
    <style>
        .content { font-family: Arial, sans-serif; line-height: 1.6; background: #f9f9f9; padding: 20px; border: 1px solid #ddd; }
        .header { background: #e9e9e9; padding: 10px; border: 1px solid #ddd; margin-bottom: 20px; }
        .back-link { margin: 20px 0; }
        a { color: blue; text-decoration: underline; }
        .title { font-size: 1.2em; font-weight: bold; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="back-link">
        <a href="/api/v1/trusted-sources/urls">&larr; Back to URL List</a>
    </div>

    <h1>Cleaned Content</h1>

    <div class="header">
        <h2>URL Information</h2>
        <p><strong>URL:</strong> <a href="{{ url_record.url }}" target="_blank">{{ url_record.url }}</a></p>
        <p><strong>Domain:</strong> {{ url_record.domain }}</p>
        <p><strong>Status:</strong> {{ url_record.status.value }}</p>
        <p><strong>Collected:</strong> {{ url_record.collected_at.strftime('%Y-%m-%d %H:%M:%S') if url_record.collected_at else 'N/A' }}</p>
        <p><strong>Scraped:</strong> {{ url_record.scraped_at.strftime('%Y-%m-%d %H:%M:%S') if url_record.scraped_at else 'N/A' }}</p>
    </div>

    {% if cleaned_content %}
    <div class="header">
        <h2>Cleaned Content Information</h2>
        <p><strong>Content ID:</strong> {{ cleaned_content.id }}</p>
        <p><strong>Text Length:</strong> {{ cleaned_content.text_length if cleaned_content.text_length else 'Unknown' }} characters</p>
        <p><strong>Cleaned At:</strong> {{ cleaned_content.cleaned_at.strftime('%Y-%m-%d %H:%M:%S') if cleaned_content.cleaned_at else 'N/A' }}</p>
        <p><strong>Raw Content ID:</strong> {{ cleaned_content.raw_content_id }}</p>
    </div>

    {% if cleaned_content.title %}
    <h2>Title</h2>
    <div class="title">{{ cleaned_content.title }}</div>
    {% endif %}

    <h2>Cleaned Text Content</h2>
    <div class="content">{{ cleaned_content.text if cleaned_content.text else 'No text content available' }}</div>

    {% else %}
    <p><strong>No cleaned content found for this URL.</strong></p>
    <p>This may mean:</p>
    <ul>
        <li>The content hasn't been cleaned yet</li>
        <li>The cleaning process failed</li>
        <li>No raw content was available to clean</li>
        <li>The content was too short or detected as boilerplate</li>
    </ul>
    {% endif %}

    <div class="back-link">
        <a href="/api/v1/trusted-sources/urls">&larr; Back to URL List</a>
        {% if cleaned_content %}
        | <a href="/api/v1/trusted-sources/urls/{{ url_record.id }}/raw">View Raw Content</a>
        {% endif %}
    </div>

    <hr>
    <p><small>Trusted Sources API - Cleaned Content Viewer</small></p>
</body>
</html>